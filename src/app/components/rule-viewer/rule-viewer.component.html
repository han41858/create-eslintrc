<ng-container *ngIf="rule">
	<h1 class="name">
		{{ rule.name }}
		<span *ngIf="rule.recommended" title="recommended">üëç</span>
		<span *ngIf="rule.fixable" title="fixable">üîß</span>
	</h1>
	<p class="description">{{ rule.description }}</p>
	<p class="version">{{ rule.version }}</p>


	<h2>Options</h2>

	<ng-container *ngIf="rule.options;else simpleOnOff">
		<ng-container *ngFor="let option of rule.options;let i=index">
			<ng-container
					*ngTemplateOutlet="optionSelector;context: { ruleName: rule.name, index: i, option: option }"></ng-container>
		</ng-container>
	</ng-container>


	<ng-template #simpleOnOff>
		<div class="option">
			<input type="radio" [id]="rule.name + '_on'" [name]="rule.name">
			<label [for]="rule.name + '_on'">on</label>
		</div>

		<div class="option">
			<input type="radio" [id]="rule.name + '_off'" [name]="rule.name">
			<label [for]="rule.name + '_off'">off</label>
		</div>

		<ng-container *ngFor="let example of rule.examples">
			<ng-container *ngTemplateOutlet="exampleViewer;context: { $implicit: example }"></ng-container>
		</ng-container>
	</ng-template>


	<ng-container *ngIf="rule.additionalOptions">
		<h2>Additional Options</h2>

		<div class="option" *ngFor="let additionalOption of rule.additionalOptions;let i=index">
			<input type="checkbox" [id]="rule.name + '_' + additionalOption.property">
			<h3>{{ additionalOption.property }}</h3>

			<ng-container
					*ngTemplateOutlet="optionSelector;context: { ruleName: rule.name, index: i, option: additionalOption }"></ng-container>

			<ng-container *ngFor="let example of additionalOption.examples">
				<ng-container *ngTemplateOutlet="exampleViewer;context: { $implicit: example }"></ng-container>
			</ng-container>
		</div>
	</ng-container>
</ng-container>


<ng-template #optionSelector let-ruleName="ruleName" let-index="index" let-option="option">
	<div class="option">
		<input type="radio" [id]="ruleName + index" [name]="ruleName">

		<ng-container [ngSwitch]="option.type">
			<div class="numberVariable" *ngSwitchCase="OptionType.NumberVariable">
				<input type="number" [value]="option.value">
			</div>

			<div class="stringFixed" *ngSwitchCase="OptionType.StringFixed">
				<label [for]="ruleName + index">{{ option.value }}</label>
			</div>

			<div class="stringVariable" *ngSwitchCase="OptionType.StringVariable">
				<input type="text" [value]="option.value">
			</div>
		</ng-container>

		<ng-container *ngFor="let example of option.examples">
			<ng-container *ngTemplateOutlet="exampleViewer;context: { $implicit: example }"></ng-container>
		</ng-container>
	</div>
</ng-template>


<ng-template #exampleViewer let-example>
	<p>
		<span>{{ example.correct ? '‚úî' : '‚ùå' }}</span>
		<code>{{ example.rule }}</code>
	</p>

	<div class="example">
		<pre class="code">{{ example.code }}</pre>
	</div>
</ng-template>
